import './scss/styles.scss';
import { Cart } from "./components/models/Cart";
import { Product } from "./components/models/Product";
import { Customer } from "./components/models/Customer";
import { ApiClient } from "./components/models/ApiClient";
import { apiProducts } from "./utils/data";
import { Api } from "./components/base/Api";
import { API_URL } from "./utils/constants";

/**
 * ğŸ§ª Local sanity-check: Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ API
 * Ğ¢ÑƒÑ‚ Ğ½ĞµÑ‚ UI-Ğ¼Ğ°Ğ³Ğ¸Ğ¸ â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡ĞµÑÑ‚Ğ½Ñ‹Ğµ console.log Ğ¸ Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ²ĞµÑ€Ñ‹ Ğ² TypeScript.
 */

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ›ï¸ ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²: ĞºĞ»Ğ°Ğ´Ñ‘Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ, ĞºĞ°Ğº Ğ² Ğ¿Ñ€Ğ¾Ğ´ â€” Ğ½Ğ¾ Ğ±ĞµĞ· Ğ¿Ñ€Ğ¾Ğ´-ÑÑ‚Ñ€Ğ°Ñ…Ğ°
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const catalogModel = new Product();

// Ğ‘ĞµÑ€Ñ‘Ğ¼ Ğ¼Ğ¾Ğº-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· ÑÑ‚Ğ°Ñ€Ñ‚ĞµÑ€Ğ° (Ğ¿Ğ¾ĞºĞ° ÑĞµÑ€Ğ²ĞµÑ€ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°ĞµÑ‚)
catalogModel.setProducts(apiProducts.items);

console.log("ğŸ›ï¸ [CATALOG] ĞœĞ°ÑÑĞ¸Ğ² Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¸Ğ· ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ°:", catalogModel.getProducts());

// Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€ â€” Ğ¿ÑƒÑÑ‚ÑŒ Ğ¿Ğ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚ ÑĞµĞ±Ñ Â«selectedÂ» Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸
const firstProduct = apiProducts.items[0];
if (firstProduct) {
  catalogModel.setSelected(firstProduct);
  console.log("ğŸ” [CATALOG] Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€:", catalogModel.getSelected());
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ‘¤ ĞŸĞ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ: Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ´Ğ°, ÑÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ´, Ğ½Ğ¾ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ²ÑÑ‘ Ñ€Ğ°Ğ²Ğ½Ğ¾ Ğ½ÑƒĞ¶ĞµĞ½)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const customerModel = new Customer();

customerModel.setCustomerInfo({
  payment: 'card',
  address: "Ğ¡Ğ°Ğ½ĞºÑ‚-ĞŸĞµÑ‚ĞµÑ€ÑƒĞ±Ñ€Ğ³ 52",
  phone: "+77777777777",
  email: "test@test.ru",
});

console.log("ğŸ‘¤ [CUSTOMER] Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»Ğµ:", customerModel.getCustomerInfo());

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ§º ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ğ°Ñ€Ñƒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¸ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµĞ¼, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ´ĞµĞ½ĞµĞ³ ÑƒĞ»ĞµÑ‚ĞµĞ»Ğ¾ Ğ±Ñ‹ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğµ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cartModel = new Cart();
const [product1, product2] = apiProducts.items;

// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ² ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ â€” ĞºĞ°Ğº Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¶Ğ¸Ğ·Ğ½Ğ¸: ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Â«Ğ½Ğ°Ğ´Ğ¾Â», Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ Â«ĞµÑ‰Ñ‘ Ğ¾Ğ´Ğ¸Ğ½Â»
[product1, product2].forEach((p) => p && cartModel.addItem(p));

console.log("ğŸ§º [CART] Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹:", cartModel.getItems());
console.log("ğŸ”¢ [CART] ĞĞ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²:", cartModel.getCount());
console.log("ğŸ’¸ [CART] ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹:", cartModel.getTotal());
console.log(`âœ… [CART] Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€ "${product1?.id}"?`, cartModel.hasItem(product1?.id || ''));

// Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° â€” Ğ½Ğ° ÑĞ»ÑƒÑ‡Ğ°Ğ¹, ĞµÑĞ»Ğ¸ Â«Ğ¿ĞµÑ€ĞµĞ´ÑƒĞ¼Ğ°Ğ»Â» (ĞºĞ»Ğ°ÑÑĞ¸ĞºĞ°)
if (product1) cartModel.removeItemById(product1.id);
console.log("ğŸ—‘ï¸ [CART] ĞŸĞ¾ÑĞ»Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ:", cartModel.getItems());

cartModel.clear();
console.log("ğŸ§¼ [CART] ĞŸĞ¾ÑĞ»Ğµ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¸ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñ‹ (0 â€” ÑÑ‚Ğ¾ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾):", cartModel.getCount());

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// âœ… Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ½Ğµ Â«undefinedÂ», Ğ° Ğ²Ğ¿Ğ¾Ğ»Ğ½Ğµ ÑĞµĞ±Ğµ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
console.log("âœ… [CUSTOMER] Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:", customerModel.validateCustomerInfo());

// Ğ¡Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»Ñ â€” GDPR Ğ¾Ğ´Ğ¾Ğ±Ñ€ÑĞµÑ‚
customerModel.clearCustomerInfo();
console.log("ğŸ§½ [CUSTOMER] ĞŸĞ¾ÑĞ»Ğµ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:", customerModel.getCustomerInfo());

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸŒ Ğ¡ĞµÑ€Ğ²ĞµÑ€: Ğ¸Ğ´Ñ‘Ğ¼ Ğ·Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ğ¼Ğ¸ (Ğ¸ Ğ½Ğ°Ğ´ĞµĞµĞ¼ÑÑ, Ñ‡Ñ‚Ğ¾ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ´Ğ¾Ğ±Ñ€Ñ‹Ğ¹)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const apiClient = new ApiClient(new Api(API_URL));

apiClient.fetchProducts()
  .then((products) => {
    console.log("ğŸŒ [API] ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°:", products);

    // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ â€” Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ñƒ Ğ½Ğ°Ñ Â«Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Â», Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ĞµĞ· Ğ´ĞµĞ´Ğ»Ğ°Ğ¹Ğ½Ğ°
    catalogModel.setProducts(products);

    console.log("ğŸ“¦ [CATALOG] ĞšĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸:", catalogModel.getProducts());
  })
  .catch((error) => console.error("ğŸ”¥ [API] ĞÑˆĞ¸Ğ±ĞºĞ° API:", error));
